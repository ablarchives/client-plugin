<?php Block::put('breadcrumb') ?>
    <ul>
        <li><a href="<?= Backend::url('albrightlabs/client/clients') ?>">Clients</a></li>
        <li><?= e($this->pageTitle) ?></li>
    </ul>
<?php Block::endPut() ?>

<?php if (!$this->fatalError): ?>

    <?php Block::put('form-contents') ?>

        <div class="control-toolbar">
          <div class="toolbar-item toolbar-primary loading-indicator-container">
              <div data-control="toolbar">
                  <a href="<?= Backend::url('albrightlabs/client/clients/create') ?>" type="button" class="btn btn-primary oc-icon-plus">New Client</a>
                  <a href="<?= Backend::url('albrightlabs/client/clients/update/'.$formModel->id) ?>" type="button" class="btn btn-default oc-icon-pencil">Edit</a>
                  <a href="javascript:void(0);" data-request="onDelete" data-request-confirm="You are deleting this client. Continue?" type="button" class="btn btn-danger oc-icon-trash">Delete</a>
              </div>
          </div>
        </div>
        <div class="form-preview">
            <div class="layout-row min-size">
                <?= $this->formRenderOutsideFields() ?>
            </div>
            <div class="layout-row">
                <?= $this->formRenderPrimaryTabs() ?>
            </div>
        </div>

    <?php Block::endPut() ?>

    <?php Block::put('form-sidebar') ?>
        <div class="hide-tabs"><?= $this->formRender(['preview' => true, 'section' => 'secondary']) ?></div>
    <?php Block::endPut() ?>

    <?php Block::put('body') ?>
        <?= Form::open(['class'=>'layout stretch']) ?>
            <?= $this->makeLayout('form-with-sidebar') ?>
        <?= Form::close() ?>
    <?php Block::endPut() ?>

<?php else: ?>

    <p class="flash-message static error"><?= e($this->fatalError) ?></p>
    <p><a href="<?= Backend::url('albrightlabs/client/clients') ?>" class="btn btn-default">Return to clients list</a></p>

<?php endif ?>
